\documentclass{beamer}

\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}[subsections numbered]

% american mathematical society
\usepackage{amsmath,amsthm,amssymb}

% reversed cases enviroment
\newenvironment{rcases}{\left.\begin{aligned}}{\end{aligned}\right\rbrace}

% drawing functionality
\usepackage{tikz}
\usetikzlibrary{matrix,patterns}

% equation numbering
\numberwithin{equation}{section}

% theorem types
\newtheorem{proposition}{Proposition}

% math operators
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\var}{Var}
\DeclareMathOperator*{\cov}{Cov}
\DeclareMathOperator{\VaR}{VaR}
\DeclareMathOperator{\cvar}{CVaR}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\dist}{dist}

% additional mathematical fonts
\usepackage{mathrsfs}
\usepackage{bbm}

% remove navigation bar
\beamertemplatenavigationsymbolsempty

% add slide numbers
\setbeamertemplate{footline}[frame number]

% title
\title{Measure Theory}
\subtitle{Exam}
\author{Kasper Rosenkrands}
\institute{Aalborg University}
\date{E20}

% toc at each section
\AtBeginSection[]
{
  \begin{frame}
    \frametitle{Table of Contents}
    \tableofcontents[currentsection, hideothersubsections]
  \end{frame}
}

% definition of comment function
\newcommand{\comment}[1]{
    \begin{center}
        \colorbox{yellow}{
            \textsf{
                \textbf{#1}
            }
        }
    \end{center}
}
\newcommand{\task}[1]{
    \begin{center}
        \colorbox{red}{
            \textsf{
                \textbf{#1}
            }
        }
    \end{center}
}

\newenvironment{frame2}{\begin{frame}\frametitle{{\normalsize \secname} \\ {\large \subsecname}}}{\end{frame}}

\begin{document}

\frame{\titlepage}

\begin{frame}
\frametitle{Table of Contents}
\tableofcontents[hideallsubsections]
\end{frame}

\section{Conditional Expectation}

\subsection{Strategy}
\begin{frame2}
    \begin{itemize}
        \item Definition of conditional expectation
        \item Remark 4.46
        \item Some of these
        \begin{itemize}
            \item Exercise 4.47
            \item Exercise 4.48
            \item Exercise 4.51
        \end{itemize}
    \end{itemize}
\end{frame2}

\section{Brownian Motions}

\subsection{Strategy}
\begin{frame2}
    \begin{itemize}
        \item Defintion of Brownian motion
        \item Exercise 5.43
        \item Exercise 5.44
    \end{itemize}
\end{frame2}

\subsection{Definition}

\begin{frame2}
    \task{Define $\nu$} 
    \textbf{Definition.} Let $(\Omega,\mathcal{F},\mathbb{P})$ be a probability space and $d\in\mathbb{N}$.
    Then a stochastic process $B = (B_t)_{t\geq 0}$ on $(\Omega,\mathcal{F},\mathbb{P})$ with target space $(\mathbb{R}^d,\mathcal{B}(\mathbb{R}^d))$ and parameter set $[0,\infty)$ is called a $d$-dimensional \textit{standard Brownian motion} or, synonymously, \textit{Wiener process} on $(\Omega,\mathcal{F},\mathbb{P})$, iff it has the following four properties:
    \begin{enumerate}
        \item All its paths $B_\bullet(\omega)$, $\omega \in \Omega$, are continuous.
        \item $\mathbb{P}(\{B_0 = 0\})=1$ or, equivalently, $\mathbb{P} \circ B^{-1}_0 = \nu_0$.
        \item $B$ has independent and stationary increments.
        \item For all $t > s \geq 0$, the distribution of $B_t - B_s$ is a $d$-dimensional centered Gaussian distribution with covariance matrix $(t-s)\mathbbm{1}_d$ or, in symbols
        \begin{align}
            \mathbb{P} \circ (B_t - B_s)^{-1} = \nu_{t - s}.
        \end{align} 
    \end{enumerate}
\end{frame2}

\subsection{Exercise 5.43}

\begin{frame2}
    \textbf{Exercise.} Compute the probabilities $\mathbb{P}(\{B_1 = 0\})$ and $\mathbb{P}(\{B_\bullet = f\})$ for $f \in C([0,\infty),\mathbb{R}^d)$.

    \vspace{10pt}
    \textbf{Solution.} 
    For the first part we have
    \begin{align}
        \mathbb{P}(\{B_1 = 0\}) &= \mathbb{P}(\{B_1 - B_0 = 0\}) \\
        &= \int_0^0 \frac{e^{-\|x\|^2/2}}{(2\pi)^{d/2}}\,\text{d}x = 0.
    \end{align}
    For the second part let us first look at the event itself
    \begin{align}
        \{B_\bullet = f\} = \{\omega \in \Omega \ | \ \forall t\geq 0\,:\, B_t = f(t)\}
    \end{align}
\end{frame2}

\begin{frame2}
    Further we observe that
    \begin{align}
        \{B_1 = f(1)\} \subset \{B_\bullet = f\}.
    \end{align}
    Notice then that
    \begin{align}
        P(B_1 = f(1)) = 0 \quad \Rightarrow \quad P(B_\bullet = f) = 0.
    \end{align}
\end{frame2}

\subsection{Exercise 5.44}

\begin{frame2}
    \textbf{Exercise.} 
    Let $B$ be a one-dimensional standard Brownian motion on the probability space $(\Omega, \mathcal{F}, \mathbb{P})$ and let $\mathbb{E}[\cdot]$ denote the expectation with respect to $\mathbb{P}$.
    Show that $\mathbb{E}[B_t] = 0$ and $\mathbb{E}[B_s B_t] = s \wedge t$ for all $s,t \geq 0$.

    \vspace{10pt}
    \textbf{Solution.}
    To show the first part observe that from 2.\! we have that
    \begin{align}
        B_t = B_t - B_0.
    \end{align}
    It then follows from 4.\! that
    \begin{align}
        B_t - B_0 \sim N(0,t).
    \end{align}
\end{frame2}

\begin{frame2}
    For the second part observe that from 3. $B$ has independent increments.
    Without loss of generality assume that $s \leq t$.
    Then we can rewrite in the following way
    \begin{align}
        \mathbb{E}[B_sB_t] &= \mathbb{E}[B_s((B_t - B_s) + B_s)] \\
        &= \mathbb{E}[B_s(B_t - B_s)] + \mathbb{E}[B_s^2].
    \end{align}
    Because $B_s = B_s - B_0$ from 1., we have that
    \begin{align}
        \mathbb{E}[B_s(B_t - B_s)] &= \mathbb{E}[(B_s - B_0)(B_t - B_s)] \\
        &= \mathbb{E}[(B_s - B_0)]\mathbb{E}[(B_t - B_s)] = 0.
    \end{align} 
    Where the second equality follows fromt the two increments being independent.
    Finally we have
    \begin{align}
        \mathbb{E}[B_sB_t] = \mathbb{E}[B_s^2] = s.
    \end{align}
\end{frame2}

\section{Martingales \& Quadratic Variation}

\subsection{Strategy}
\begin{frame2}
    \begin{itemize}
        \item Introduce the martingale definition
        \item Any additional concepts needed
        \item Show that one-dimensional Brownian motion is a martingale
    \end{itemize}
 \end{frame2}

\subsection{Prerequisites}

\begin{frame2}
    \task{Define these things}
    \begin{itemize}
        \item Brownian Motions (only briefly as this is topic 2)
        \item Martingale
        \item Natural Filtration
    \end{itemize}
\end{frame2}

\begin{frame2}
    Let $(M_t)_{t\in I}$ be an adapted $\mathbb{R}$-valued stochastic process such that $M_t: \ \Omega \rightarrow \mathbb{R}$ is $\mathbb{P}$-integrable for every $t\in I$.
    \begin{itemize}
        \item<-1> $M$ is called a $(\mathcal{F}_t)_{t\in I}$-martingale iff
        \begin{align}
            \mathbb{E}^{\mathcal{F}_s}[M_t] = M_s, \quad \mathbb{P}-\text{a.s.\! for all } s,t \in I \text{ with } s\leq t.
        \end{align}
        \item<2-> $M$ is called a $(\mathcal{F}_t)_{t\in I}$-submartingale iff
        \begin{align}
            \mathbb{E}^{\mathcal{F}_s}[M_t] \geq M_s, \quad \mathbb{P}-\text{a.s.\! for all } s,t \in I \text{ with } s\leq t.
        \end{align}
        \item<3-> Analogously for supermartingale.
    \end{itemize}
\end{frame2}

\subsection{One-dimensional Brownian Motions}

\begin{frame2}
    If $B$ is a one-dimensional $(\mathcal{F}_t)_{t\geq 0}$-Brownian motion, then $B$ is a $(\mathcal{F}_t)_{t\geq 0}$-martingale.

    In particular, every one-dimensional standard Brownian motion $B$ is a martingale with respect to its natural filtration $(\mathcal{B}_t^B)_{t\geq 0}$.
    \vspace{5pt}
    \hrule
    \vspace{5pt}
    %\task{Repeat Remark 6.7}
    Remark 6.7. Let $(M_t)_{t \in I}$ be a $(\mathcal{F}_t)_{t\in I}$-martingale and denote by $(\Omega, \tilde{\mathcal{F}},(\tilde{\mathcal{F}}_t)_{t\in I},\tilde{\mathbb{P}})$ the completion of $(\Omega, \mathcal{F},(\mathcal{F}_t)_{t\in I},\mathbb{P})$.
    Then $(M_t)_{t\in I}$ is a $(\tilde{\mathcal{F}}_t)_{t\in I}$-martingale as well, provided that $(\Omega, \tilde{\mathcal{F}},(\tilde{\mathcal{F}}_t)_{t\in I},\tilde{\mathbb{P}})$ is chosen as the underlying filtered probability space.
    \vspace{5pt}
    \hrule
    \vspace{5pt}
    By virtue of Remark 6.7 we can further conclude that every one-dimensional standard Brownian motion $B$ is a martingale on the standard filtered probability space $(\Omega, \tilde{\mathcal{F}},(\tilde{\mathcal{F}_t^B})_{t\geq 0},\tilde{\mathbb{P}})$ obtained by completing $(\Omega, \mathcal{F},(\mathcal{F}_t^B)_{t\geq 0},\mathbb{P})$.
\end{frame2}

\begin{frame2}
    \begin{itemize} 
        \item Let us first recall that
        \begin{align}
            \int_{\Omega} |B_t| \, d\mathbb{P} &= \frac{1}{(2\pi t)^{1/2}}\int_\mathbb{R} |x| e^{-x^2/2t} \, dx < \infty, \\
            \mathbb{E}[B_t] &= \frac{1}{(2\pi t)^{1/2}}\int_\mathbb{R}xe^{-x^2/2t} \, dx,
        \end{align}
        for every $t > 0$.
    \end{itemize}
\end{frame2}

\begin{frame2}
    \begin{itemize}
        \item Since $B_0 = 0$, $\mathbb{P}-$a.s., it follows in particular that $B_t$ is $\mathbb{P}$-integrable with $\mathbb{E}[B_t] = 0$ for all $t \geq 0$.
        \item For all $0 \leq s \leq t < \infty$, we further observe that, $\mathbb{P}-$a.s.,
        \begin{align}
            \mathbb{E}^{\mathcal{F}_s}[B_t] &= \mathbb{E}^{\mathcal{F}_s}[B_t - B_s] + \mathbb{E}^{\mathcal{F}_s} \\
             &= \mathbb{E}[B_t - B_s] + B_s = \mathbb{E}[B_t] - \mathbb{E}[B_s] + B_s, 
        \end{align}
        since the increment $B_t - B_s$ is $\mathcal{F}_s$-independent and $B_s$ is $\mathcal{F}_s$-measurable.
    \end{itemize}
\end{frame2}

\section{ItÃ´s Formula}

\subsection{Strategy}
\begin{frame2}
    \begin{itemize}
        \item 
    \end{itemize}
\end{frame2}

\section{Stochastic Integrals}

\subsection{Strategy}
\begin{frame2}
    \begin{itemize}
        \item 
    \end{itemize}
\end{frame2}

\section{Girsanov-Transformation}

\subsection{Strategy}
\begin{frame2}
    \begin{itemize}
        \item 
    \end{itemize}
\end{frame2}

\end{document}
